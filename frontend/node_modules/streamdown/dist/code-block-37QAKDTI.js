"use client";
import {a,h as h$1,c,b}from'./chunk-5FQGJX7Z.js';import {memo,useMemo,useContext,useState,useEffect}from'react';import {jsx,jsxs}from'react/jsx-runtime';var H=a("block","before:content-[counter(line)]","before:inline-block","before:[counter-increment:line]","before:w-6","before:mr-4","before:text-[13px]","before:text-right","before:text-muted-foreground/50","before:font-mono","before:select-none"),k=memo(({children:o,result:e,language:s,className:a$1,...p})=>{let d=useMemo(()=>({backgroundColor:e.bg,color:e.fg}),[e.bg,e.fg]);return jsx("pre",{className:a(a$1,"p-4 text-sm dark:bg-(--shiki-dark-bg)!"),"data-language":s,"data-streamdown":"code-block-body",style:d,...p,children:jsx("code",{className:"[counter-increment:line_0] [counter-reset:line]",children:e.tokens.map((l,r)=>jsx("span",{className:H,children:l.map((t,n)=>jsx("span",{className:"dark:bg-(--shiki-dark-bg)! dark:text-(--shiki-dark)!",style:{color:t.color,backgroundColor:t.bgColor,...t.htmlStyle},...t.htmlAttrs,children:t.content},n))},r))})})},(o,e)=>o.result===e.result&&o.language===e.language&&o.className===e.className);var C=({className:o,language:e,style:s,...a$1})=>jsx("div",{className:a("my-4 w-full overflow-hidden rounded-xl border border-border",o),"data-language":e,"data-streamdown":"code-block",style:{contentVisibility:"auto",containIntrinsicSize:"auto 200px",...s},...a$1});var h=({language:o,children:e})=>jsxs("div",{className:"flex items-center justify-between bg-muted/80 p-3 text-muted-foreground text-xs","data-language":o,"data-streamdown":"code-block-header",children:[jsx("span",{className:"ml-1 font-mono lowercase",children:o}),jsx("div",{className:"flex items-center gap-2",children:e})]});var W=({code:o,language:e,className:s,children:a,...p})=>{let{shikiTheme:d}=useContext(h$1),l=c(),r=useMemo(()=>({bg:"transparent",fg:"inherit",tokens:o.split(`
`).map(c=>[{content:c,color:"inherit",bgColor:"transparent",htmlStyle:{},offset:0}])}),[o]),[t,n]=useState(r);return useEffect(()=>{if(!l){n(r);return}let c=l.highlight({code:o,language:e,themes:d},B=>{n(B);});if(c){n(c);return}n(r);},[o,e,d,l,r]),jsx(b.Provider,{value:{code:o},children:jsxs(C,{language:e,children:[jsx(h,{language:e,children:a}),jsx(k,{className:s,language:e,result:t,...p})]})})};export{W as CodeBlock};