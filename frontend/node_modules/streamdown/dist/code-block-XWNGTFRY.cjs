"use client";
'use strict';var chunkQX4TVXVA_cjs=require('./chunk-QX4TVXVA.cjs'),react=require('react'),jsxRuntime=require('react/jsx-runtime');var H=chunkQX4TVXVA_cjs.a("block","before:content-[counter(line)]","before:inline-block","before:[counter-increment:line]","before:w-6","before:mr-4","before:text-[13px]","before:text-right","before:text-muted-foreground/50","before:font-mono","before:select-none"),k=react.memo(({children:o,result:e,language:s,className:a,...p})=>{let d=react.useMemo(()=>({backgroundColor:e.bg,color:e.fg}),[e.bg,e.fg]);return jsxRuntime.jsx("pre",{className:chunkQX4TVXVA_cjs.a(a,"p-4 text-sm dark:bg-(--shiki-dark-bg)!"),"data-language":s,"data-streamdown":"code-block-body",style:d,...p,children:jsxRuntime.jsx("code",{className:"[counter-increment:line_0] [counter-reset:line]",children:e.tokens.map((l,r)=>jsxRuntime.jsx("span",{className:H,children:l.map((t,n)=>jsxRuntime.jsx("span",{className:"dark:bg-(--shiki-dark-bg)! dark:text-(--shiki-dark)!",style:{color:t.color,backgroundColor:t.bgColor,...t.htmlStyle},...t.htmlAttrs,children:t.content},n))},r))})})},(o,e)=>o.result===e.result&&o.language===e.language&&o.className===e.className);var C=({className:o,language:e,style:s,...a})=>jsxRuntime.jsx("div",{className:chunkQX4TVXVA_cjs.a("my-4 w-full overflow-hidden rounded-xl border border-border",o),"data-language":e,"data-streamdown":"code-block",style:{contentVisibility:"auto",containIntrinsicSize:"auto 200px",...s},...a});var h=({language:o,children:e})=>jsxRuntime.jsxs("div",{className:"flex items-center justify-between bg-muted/80 p-3 text-muted-foreground text-xs","data-language":o,"data-streamdown":"code-block-header",children:[jsxRuntime.jsx("span",{className:"ml-1 font-mono lowercase",children:o}),jsxRuntime.jsx("div",{className:"flex items-center gap-2",children:e})]});var W=({code:o,language:e,className:s,children:a,...p})=>{let{shikiTheme:d}=react.useContext(chunkQX4TVXVA_cjs.h),l=chunkQX4TVXVA_cjs.c(),r=react.useMemo(()=>({bg:"transparent",fg:"inherit",tokens:o.split(`
`).map(c=>[{content:c,color:"inherit",bgColor:"transparent",htmlStyle:{},offset:0}])}),[o]),[t,n]=react.useState(r);return react.useEffect(()=>{if(!l){n(r);return}let c=l.highlight({code:o,language:e,themes:d},B=>{n(B);});if(c){n(c);return}n(r);},[o,e,d,l,r]),jsxRuntime.jsx(chunkQX4TVXVA_cjs.b.Provider,{value:{code:o},children:jsxRuntime.jsxs(C,{language:e,children:[jsxRuntime.jsx(h,{language:e,children:a}),jsxRuntime.jsx(k,{className:s,language:e,result:t,...p})]})})};exports.CodeBlock=W;